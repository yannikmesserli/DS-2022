<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <title>Esri Dev Summit 2022 - ArcGIS JS API for JavaScript: Web editing in 3D</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" rel="stylesheet" />

    <link rel="stylesheet" href="../reveal.js/dist/reset.css" />
    <link rel="stylesheet" href="../reveal.js/dist/reveal.css" />
    <link rel="stylesheet" href="../reveal.js/dist/theme/black.css" />
    <link rel="stylesheet" href="../resources/highlighting-theme.css" />
    <link rel="stylesheet" href="../resources/main.css" />
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section data-background="../img/2022/dev-summit/bg-1.png" data-background-size="cover">
          <h1 style="text-align: left; font-size: 60px">
            ArcGIS JS API for JavaScript: <br />
            Web editing in 3D
          </h1>
          <p style="text-align: left; font-size: 30px; color: var(--r-section-subhead-color)">
            Grete Soosalu, Hugo Campos & Jesse van den Kieboom
          </p>
          <p style="text-align: left; font-size: 30px">
            Slides:
            <a href="http://bit.ly/abc123"><code>http://bit.ly/abc123</code></a>
          </p>
        </section>

        <section data-background="../img/2022/dev-summit/bg-3.png">
          <h2 id="agenda">Agenda</h2>
          <ul style="font-size: 2rem">
            <li>From editing in 2D to editing in 3D</li>
            <li>
              SketchViewModel basics in 3D
              <ul style="font-size: 1.8rem">
                <li>Placing trees on the ground</li>
                <li>Placing airplanes in the air</li>
                <li>Placing antennas relative to the scene</li>
                <li>Sketching a new terminal</li>
              </ul>
            </li>
            <li>FeatureLayer and the Editor widget</li>
            <li>SceneLayer editing</li>
            <li>Building proposal planning app (dive-in)</li>
          </ul>
        </section>

        <section class="align-left" data-background="../img/2022/dev-summit/bg-2.png">
          <h2>From editing in 2D to editing in 3D</h2>
          <div class="two-columns">
            <div class="left-column" style="width: 50%">
              <ul style="font-size: 2rem">
                <li>
                  Using the <code>Editor</code> widget in a <code>SceneView</code> works out-of-the
                  box.
                </li>
                <li>
                  <code>SketchViewModel</code>, <code>FeatureForm</code> and
                  <code>Editor</code> work similarly in 2D and 3D.
                </li>
                <li>No need to prepare data specifically for 3D.</li>
              </ul>

              <pre data-fragment-id="use-scene-view" class="code-snippet fragment">
                <button class="play"></button>
                <code class="lang-ts" data-trim>
                  // const view = new MapView({ /* ... */ });
                  const view = new SceneView({ /* ... */ });

                  const editor = new Editor({ view /* ... */})
                </code>
              </pre>
            </div>
            <div class="right-column">
              <div class="iframe-wrapper">
                <iframe data-src="./samples/editing-2d-to-3d/index.html"></iframe>
              </div>
            </div>
          </div>
        </section>

        <!--
         Tree
        -->
        <section
          data-slideId="tree"
          class="align-left"
          data-background="../img/2022/dev-summit/bg-2.png"
        >
          <h2 class="header">Placing tree on the ground</h2>

          <div class="two-columns">
            <div class="left-column">
              <div data-fragment-id="place-point" class="code-snippet">
                <button class="play"></button>
                <pre>
                  <code class="lang-ts" data-trim>               
                    const tree = new Graphic({ 
                      geometry: new Point({
                        spatialReference,
                        x: 1099766.76,
                        y: 5865813.01
                        // Note: no Z value!
                      })
                    });

                    const trees = new GraphicsLayer({
                      elevationInfo: { mode: "on-the-ground" }
                    });

                    trees.add(tree);
                  </code>
                </pre>
              </div>

              <div data-fragment-id="set-tree-symbol" class="code-snippet fragment">
                <button class="play"></button>
                <pre>
                  <code class="lang-ts" data-trim>
                    const webStyle = new WebStyleSymbol({
                      /* ... */
                    });
                    
                    tree.symbol = await webStyle.fetchSymbol();
                  </code>
                </pre>
              </div>
            </div>
            <div class="right-column">
              <div class="iframe-wrapper">
                <iframe data-src="./samples/tree/index.html"></iframe>
              </div>
            </div>
          </div>
        </section>

        <section class="align-left" data-background="../img/2022/dev-summit/bg-2.png">
          <h2 class="header">Web Style Symbols</h2>
          <iframe
            class="r-stretch"
            data-src="https://developers.arcgis.com/javascript/latest/visualization/symbols-color-ramps/esri-web-style-symbols-3d/#schematic-vegetation"
          ></iframe>
        </section>

        <!--
         Tree (Editable)
        -->
        <section
          data-slideId="tree-editable"
          class="align-left"
          data-background="../img/2022/dev-summit/bg-2.png"
        >
          <h2 class="header">Moving tree on the ground</h2>

          <div class="two-columns">
            <div class="left-column">
              <div data-fragment-id="update-tree" class="code-snippet">
                <button class="play"></button>
                <pre>
                  <code class="lang-ts" data-trim>
                    const sketchVM = new SketchViewModel({ 
                      view,
                      layer: trees
                    });

                    sketchVM.update(tree);
                  </code>
                </pre>
              </div>
            </div>
            <div class="right-column">
              <div class="iframe-wrapper">
                <iframe data-src="./samples/tree/index.html"></iframe>
              </div>
            </div>
          </div>
        </section>

        <!--
         Antenna
        -->
        <section
          data-slideId="antenna"
          class="align-left"
          data-background="../img/2022/dev-summit/bg-2.png"
        >
          <h2 class="header">Placing antenna on the roof</h2>

          <div class="two-columns">
            <div class="left-column">
              <div data-fragment-id="create-point" class="code-snippet">
                <button class="play"></button>
                <pre>
                  <code class="lang-ts" data-trim>
                    sketchVM.layer = antennas;
                    sketchVM.pointSymbol = antennaSymbol;

                    sketchVM.on("create", (event) => {
                      if (event.state === "complete") {
                        sketchVM.update(event.graphic);
                      }
                    });

                    sketchVM.create("point");
                  </code>
                </pre>
              </div>

              <div
                data-fragment-id="set-relative-to-scene"
                class="code-snippet play-container fragment"
              >
                <button class="play"></button>
                <pre>
                  <code class="lang-ts" data-trim>
                    antennas.elevationInfo = {
                      mode: "relative-to-scene"
                    };
                  </code>
                </pre>
              </div>
            </div>
            <div class="right-column">
              <div class="iframe-wrapper">
                <iframe data-src="./samples/antenna/index.html"></iframe>
              </div>
            </div>
          </div>
        </section>

        <!--
         Airplane
        -->
        <section
          data-slideId="airplane"
          class="align-left"
          data-background="../img/2022/dev-summit/bg-2.png"
        >
          <h2 class="header">Placing airplane in the air</h2>

          <div class="two-columns">
            <div class="left-column">
              <div class="code-snippet">
                <pre>
                  <code class="lang-ts" data-trim>
                    const geometry = new Point({
                      spatialReference: SpatialReference.WebMercator,
                      x: 1099766.76,
                      y: 5865813.01,
                      z: 50 // We now have elevation!!!
                    });
                
                    const airplane = new Graphic({ 
                      geometry,
                      symbol: airplaneSymbol
                    });
                  </code>
                </pre>
              </div>

              <div data-fragment-id="create" class="code-snippet fragment">
                <button class="play"></button>
                <pre>
                  <code class="lang-ts" data-trim>
                    airplanes = new GraphicsLayer({
                      elevationInfo: { mode: "relative-to-ground" },
                    });
                    airplanes.add(airplane);
                  </code>
                </pre>
              </div>

              <div data-fragment-id="set-absolute-height" class="code-snippet fragment">
                <button class="play"></button>
                <pre>
                  <code class="lang-ts" data-trim>
                    airplanes.elevationInfo = {
                      mode: "absolute-height"
                    };
                    airplane.geometry.z = 1708; // Runway elevation
                  </code>
                </pre>
              </div>
            </div>
            <div class="right-column">
              <div class="iframe-wrapper">
                <iframe data-src="./samples/airplane/index.html"></iframe>
              </div>
            </div>
          </div>
        </section>

        <!--
         Airplane
        -->
        <section
          data-slideId="terminal"
          class="align-left"
          data-background="../img/2022/dev-summit/bg-2.png"
        >
          <h2 class="header">Sketching a new airport building</h2>

          <div class="two-columns">
            <div class="left-column">
              <div data-fragment-id="create" class="code-snippet">
                <button class="play"></button>
                <pre>
                  <code class="lang-ts" data-trim>
                    sketchVM.layer = new GraphicsLayer({
                      elevationInfo = { mode: "absolute-height" }
                    });

                    sketchVM.polygonSymbol = new PolygonSymbol3D({
                      symbolLayers: [
                        new ExtrudeSymbol3DLayer({
                          size: 10,
                          material: { color: [255, 128, 0, 1] },
                        }),
                      ],
                    });

                    sketchVM.create("polygon");
                  </code>
                </pre>
              </div>

              <div data-fragment-id="enable-snapping" class="code-snippet fragment">
                <button class="play"></button>
                <pre>
                  <code class="lang-ts" data-trim>
                    Object.assign(sketchVM.snappingOptions, {
                      enabled: true,
                      featureSources: [{ layer: terminals }]
                    });
                  </code>
                </pre>
              </div>

              <div data-fragment-id="enable-snapping" class="code-snippet fragment">
                <button class="play"></button>
                <pre>
                  <code class="lang-ts" data-trim>
                    const reshapeOptions = sketchVM
                      .defaultUpdateOptions
                      .reshapeOptions;

                    reshapeOptions.edgeOperation = "offset";
                  </code>
                </pre>
              </div>
            </div>
            <div class="right-column">
              <div class="iframe-wrapper">
                <iframe data-src="./samples/airport-terminal/index.html"></iframe>
              </div>
            </div>
          </div>
        </section>

        <!--

              <div data-fragment-id="polygons" class="fragment v-stack">
                <div data-fragment-id="polygons-click" class="code-snippet">
                  <button class="play"></button>
                  <pre>
                    <code class="lang-ts" data-trim>
                    const terminals = new GraphicsLayer({ 
                      elevationInfo: { mode: "relative-to-scene" }
                    });
                    view.map.add(terminals);

                    const button = createButton();

                    button.addEventListener("click", () => {
                      sketchVM.layer = terminals;
                      sketchVM.polygonSymbol = createTerminalSymbol();
                      sketchVM.create("polygon");
                    });
                    </code>
                  </pre>
                </div>

                <div data-fragment-id="enable-snapping" class="code-snippet fragment">
                  <button class="play"></button>
                  <pre>
                    <code class="lang-ts" data-trim>
                    sketchVM.snappingOptions.enabled = true;
                    sketchVM.snappingOptions.featureSources = [
                      { layer: terminals }
                    ];
                    </code>
                  </pre>
                </div>
              </div>
            </div>
            <div class="right-column">
              <div class="iframe-wrapper">
                <iframe data-src="./samples/airport/index.html"></iframe>
              </div>
            </div>
          </div>
        </section>
      -->

        <section
          data-slideId="feature-layer"
          class="align-left"
          data-background="../img/2022/dev-summit/bg-2.png"
        >
          <h2 class="header">FeatureLayer and the Editor widget</h2>

          <div class="two-columns">
            <div class="left-column r-stack no-margin">
              <div data-fragment-index="0" class="code-snippet fragment fade-out">
                <pre>
                  <code class="lang-ts" data-trim>
                  const pointLayer = new FeatureLayer({
                    title: "Airplanes",
                    /* ... */
                    renderer: new UniqueValueRenderer({
                      /* ... */
                      visualVariables: [
                        new SizeVariable({
                          axis: "height",
                          field: "SIZE",
                          valueUnit: "meters",
                        }),
                        new RotationVariable({
                          field: "ROTATION",
                          rotationType: "geographic",
                        }),
                      ],
                    }),
                  });

                  view.map.add(pointLayer);
                  </code>
                </pre>
              </div>

              <div data-fragment-index="0" class="code-snippet fragment fade-in-then-out">
                <pre>
                  <code class="lang-ts" data-trim>                                 
                  const layerInfos = {
                    layer: pointLayer,
                    formTemplate: new FormTemplate({
                      elements: [
                        new FieldElement({ 
                          fieldName: "ROTATION",
                          label: "Rotation"
                        }),
                        new FieldElement({
                          fieldName: "SIZE",
                          label: "Size"
                        }),
                      ],
                    })
                  };

                  const editor = new Editor({ view, layerInfos });
                  view.ui.add(editor, "top-right");
                  </code>
                </pre>
              </div>
            </div>
            <div class="right-column">
              <div class="iframe-wrapper">
                <iframe data-src="./samples/feature-layer/index.html"></iframe>
              </div>
            </div>
          </div>
        </section>

        <section
          data-slideId="scene-layer"
          class="align-left"
          data-background="../img/2022/dev-summit/bg-2.png"
        >
          <h2 class="header">SceneLayer editing</h2>

          <div class="two-columns">
            <div class="left-column v-stack no-margin" style="width: 50%">
              <div data-fragment-id="add-widget" class="code-snippet">
                <button class="play"></button>
                <pre>
                  <code class="lang-ts" data-trim>
                    const editor = new Editor({ view });

                    view.ui.add(editor, "top-right");
                  </code>
                </pre>
              </div>

              <div
                data-fragment-id="add-widget"
                class="code-snippet"
                style="place-content: center; display: grid; flex-grow: 1"
              >
                <img src="./images/data-connected-scene-layer.png" style="filter: invert(1)" />
              </div>
            </div>
            <div class="right-column">
              <div class="iframe-wrapper">
                <iframe data-src="./samples/scene-layer/index.html"></iframe>
              </div>
            </div>
          </div>
        </section>

        <section class="align-left" data-background="../img/2022/dev-summit/bg-2.png">
          <h2>Building proposal planning app (dive-in)</h2>
          <iframe class="r-stretch" data-src="./samples/advanced-editing/index.html"></iframe>
        </section>

        <!-- FEEDBACK SLIDE: -->
        <section data-markdown data-background="../img/2022/dev-summit/bg-7.png">
          <textarea data-template>
            Please provide your feedback for this session by clicking on the session survey link directly below the video.
          </textarea>
        </section>

        <!-- ESRI LOGO SLIDE: -->
        <section data-background="../img/2022/dev-summit/bg-8.png">
          <!-- <img src="img/esri-science-logo-white.png" /> -->
        </section>
      </div>
    </div>

    <script src="./main.js" type="module"></script>
  </body>
</html>
